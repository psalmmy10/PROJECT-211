<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Corona Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="../../assets/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="../../assets/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="../../assets/css/style.css">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="../../assets/images/favicon.png"/>
    <link rel="stylesheet" href="MyAppLogin.css">
    
  </head>
  <body>
    <div class="container-scroller">
      <div class=" container-fluid page-body-wrapper full-page-wrapper ">
        <div class="container-fluid holder shadow-white col-md-4 ">
            <div class="container text-center pt-4 pt-2" > 
               <img  src="../samples/IMAGE/My profile2.jpg"  alt=""> 
            </div>
            <div class="container-fluid col-md-8 holder-one">
                <form id="login">
                    <div class="class pt-3">
                      <label for="exampleInputEmail1" class="mb-0"><b class="text-dark">Username</b></label>
                      <input type="username" class="form-control mb-2" id="username"  placeholder="Choose Username">
                    </div>
                    <div class="form-group">
                      <label for="exampleInputPassword1" class="my-0"><b class="text-dark">Password</b></label>
                      <input type="password" class="form-control" id="Password" placeholder="Password">
                    </div>
                    <button type="button" class="btn btn-success mb-1 col-md-12" onclick="check()">login</button>
                    <a href="http://127.0.0.1:5500/BOOTSTRAP/MyAppSignUp.html" class="mb-5"><b>Sign up?</b></a>
                    <p id="result" class="pb-4 text-dark"></p>
                  </form>
            </div>
            
        </div>
    </div>
      <!-- <div class="container-fluid page-body-wrapper full-page-wrapper">
        <div class="row w-100 m-0">
          <div class="content-wrapper full-page-wrapper d-flex align-items-center auth login-bg">
            <div class="card col-lg-4 mx-auto">
              <div class="card-body px-5 py-5">
                <h3 class="card-title text-left mb-3">Login</h3>
                <form>
                  <div class="form-group">
                    <label>Username or email *</label>
                    <input type="text" class="form-control p_input" id="username">
                  </div>
                  <div class="form-group">
                    <label>Password *</label>
                    <input type="text" class="form-control p_input" id="Password">
                    <p id="result" class="pb-4"></p>
                  </div>
                  <div class="form-group d-flex align-items-center justify-content-between">
                    <div class="form-check">
                      <label class="form-check-label">
                        <input type="checkbox" class="form-check-input"> Remember me </label>
                    </div>
                    <a href="#" class="forgot-pass">Forgot password</a>
                  </div>
                  <div class="text-center">
                    <button type="button" class="btn btn-primary btn-block enter-btn" onclick="check()">Login</button>
                  </div>
                  <div class="d-flex">
                    <button class="btn btn-facebook mr-2 col">
                      <i class="mdi mdi-facebook"></i> Facebook </button>
                    <button class="btn btn-google col">
                      <i class="mdi mdi-google-plus"></i> Google plus </button>
                  </div>
                  <p class="sign-up">Don't have an Account?<a href="file:///C:/Users/DELL/Desktop/My%20Project/corona-free-dark-bootstrap-admin-a-1.0.0%20(2)/corona-free-dark-bootstrap-admin-template-1.0.0/template/pages/samples/register.html"> Sign Up</a></p>
                </form>
              </div> -->
            <!-- </div>
          </div> -->
          <!-- content-wrapper ends -->
        </div>
        <!-- row ends -->
      <!-- </div> -->
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="../../assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="../../assets/js/off-canvas.js"></script>
    <script src="../../assets/js/hoverable-collapse.js"></script>
    <script src="../../assets/js/misc.js"></script>
    <script src="../../assets/js/settings.js"></script>
    <script src="../../assets/js/todolist.js"></script>
    <script>
      var uname = document.getElementById('username');
      var pword = document.getElementById('Password');

  
      function check(){
        if (uname.value == "" || pword.value == "") {
            alert({
                title:"Can't take empty field",
            });
        }
        else{
          var data = {
              uname: username.value,
              pword: Password.value,
              userType: "user"
          };

          let loginStatus = false;
          let users = JSON.parse(localStorage.getItem("users"));
          let authUser = {}

          users.some(el =>{
            if(el.uname == data.uname && el.pword == data.pword){
              loginStatus = true;
              authUser = el
            }
          });

          if(loginStatus){
            result.innerHTML = `Logged in <i class="fa-solid fa-circle-check"></i>`
            alert("Welcome!", "Logged successfully!", "success");
            for(let i = 0; i < users.length; i++){
              if(users[i].userType == "user"){
                window.location.assign("http://127.0.0.1:5501/corona-free-dark-bootstrap-admin-template-1.0.0/template/index.html")
              }
              else{
                window.location.assign("http://127.0.0.1:5501/corona-free-dark-bootstrap-admin-template-1.0.0/corso-1.0.0/index.html") 
                localStorage.setItem('authUser',JSON.stringify(authUser))
              }
            }
          }
          else{
            alert({
                title: "Account Doesn't exit, incorrect details",
            });
            result.innerHTML = `No Username or Password Match<i class="fa-solid fa-circle-exclamation"></i>`
          }
        }

      }
      
      
      let users = JSON.parse(localStorage.getItem("users"));

        if(localStorage.getItem("users") == null){
          localStorage.setItem("users",JSON.stringify([{
            uname:"Admin",
            mail:"admin@gmail.com",
            pword:"Ade+123456789",
            userType:"Admin"
          }]));
        }else{
          users = JSON.parse(localStorage.getItem("users"))?JSON.parse(localStorage.getItem("users")):[]
          if(users.some(el => el.mail == "admin@gmail.com" || el.uname.toLowerCasw() == "admin") == false){
            users.push({
              uname:"Admin",
              mail:"admin@gmail.com",
              pword:"Ade+123456789",
              userType:"Admin"
            })
          }
          localStorage.setItem("users",JSON.stringify(users))
        }

  </script>
    <!-- endinject -->
  </body>
</html>